import React, { Component } from 'react';
import NameList from './name-list/name-list.component';
import TextField from 'material-ui/TextField';
import axios from 'axios';


class Home extends Component {
    state = { 
        name: "",
        nameList: [] 
     };
     componentDidMount = () => {
         // call main.php with a POST with {requestType: get}
         axios.post('http://staff.audancemarathon.com/signin/build/api/main.php', {requestType: 'get'})
            .then((data) => {
                this.setState({nameList: data.data}); 
            })
            .catch((error) => {
                console.error(error);
                //alert('Could not retrieve users from System - call Matt'); 
                var data = [{"ID":"2","Name":"Team Captain","Email":"idk0005@whatever.com","Organization":"Pi Kappa Phi","Delegate":"YES","Amount":"0","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"2","DateSignedIn":"0000-00-00","Team":"Pi Kappa Phi","Color":"Purple"},{"ID":"3","Name":"Anne Custodio","Email":"arc0063@auburn.edu","Organization":"Alpha Omega Epsilon","Delegate":"YES","Amount":"30","Tshirt":"M","SignedIn":"0","Year":"0","TimesAttended":"1","DateSignedIn":"0000-00-00","Team":"Alpha Omega Epsilon","Color":"Purple"},{"ID":"4","Name":"Morgan Blake","Email":"meb0081@auburn.edu","Organization":"Tri N Beat Us","Delegate":"YES","Amount":"229","Tshirt":"XL","SignedIn":"1","Year":"0","TimesAttended":"1","DateSignedIn":"2018-02-10","Team":"Tri N Beat Us","Color":"Blue"},{"ID":"5","Name":"Jaime Green","Email":"jxg0001@auburn.edu","Organization":"KKG is FTK","Delegate":"NO","Amount":"125","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"0","DateSignedIn":"0000-00-00","Team":"KKG is FTK","Color":"Purple"},{"ID":"6","Name":"Emily Wilber","Email":"emw0051@tigermail.auburn.edu","Organization":"Tri Sigma","Delegate":"NO","Amount":"225","Tshirt":"M","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Tri Sigma","Color":"Purple"},{"ID":"7","Name":"Peyton Northington","Email":"pln0003@auburn.edu","Organization":"Phi Mu","Delegate":"YES","Amount":"172","Tshirt":"XL","SignedIn":"1","Year":"0","TimesAttended":"2","DateSignedIn":"2018-02-10","Team":"Phi Mu","Color":"Pink"},{"ID":"8","Name":"Allen Turner","Email":"ast0014@auburn.edu","Organization":"Auburn University Marching Band","Delegate":"NO","Amount":"202","Tshirt":"S","SignedIn":"1","Year":"0","TimesAttended":"1","DateSignedIn":"2018-02-09","Team":"Auburn University Marching Band","Color":"Blue"},{"ID":"9","Name":"Michella Minyard","Email":"mbm0061@auburn.edu","Organization":"FBCO","Delegate":"YES","Amount":"0","Tshirt":"2XL","SignedIn":"0","Year":"0","TimesAttended":"0","DateSignedIn":"0000-00-00","Team":"FBCO","Color":"Pink"},{"ID":"10","Name":"Coulter Burns","Email":"chb0029@tigermail.auburn.edu","Organization":"Auburn University Marching Band","Delegate":"NO","Amount":"0","Tshirt":"XL","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-10","Team":"Auburn University Marching Band","Color":"Blue"},{"ID":"11","Name":"Mackenzie Erneston","Email":"mre0015@auburn.edu","Organization":"Tri Sigma","Delegate":"NO","Amount":"400","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Tri Sigma","Color":"Purple"},{"ID":"12","Name":"Team Captain","Email":"idk0003@whatever.com","Organization":"Be Well Hut","Delegate":"YES","Amount":"0","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"2","DateSignedIn":"0000-00-00","Team":"Be Well Hut","Color":"Pink"},{"ID":"13","Name":"Megan Lanthier","Email":"mrl0031@auburn.edu","Organization":"Zeta","Delegate":"YES","Amount":"0","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"2","DateSignedIn":"2018-02-11","Team":"Zeta","Color":"Pink"},{"ID":"14","Name":"Lindsey Sullivan","Email":"lms0070@tigermail.auburn.edu","Organization":"Emerge is FTK","Delegate":"YES","Amount":"50","Tshirt":"XL","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Emerge is FTK","Color":"Green"},{"ID":"15","Name":"Sarah Kelly","Email":"skelly@cmnhospitals.org","Organization":"We're Pretty Fly for Alumni","Delegate":"NO","Amount":"40","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"4","DateSignedIn":"0000-00-00","Team":"We're Pretty Fly for Alumni","Color":"Orange"},{"ID":"16","Name":"Michelle Allsup","Email":"mra0031@tigermail.auburn.edu","Organization":"Tri Sigma","Delegate":"NO","Amount":"75","Tshirt":"S","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Tri Sigma","Color":"Purple"},{"ID":"17","Name":"Kelsey Stratford","Email":"kls0088@auburn.edu","Organization":"Pi Beta Phi","Delegate":"NO","Amount":"0","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Pi Beta Phi","Color":"Orange"},{"ID":"18","Name":"Mary Frances Bloodworth","Email":"mfb0015@auburn.edu","Organization":"Sigma Kappa","Delegate":"NO","Amount":"0","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"0","DateSignedIn":"0000-00-00","Team":"Sigma Kappa","Color":"Yellow"},{"ID":"19","Name":"Mattie Kilpatrick","Email":"mattiekilpatrick@gmail.com","Organization":"Tri N Beat Us","Delegate":"NO","Amount":"889.75","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"1","DateSignedIn":"2018-02-08","Team":"Tri N Beat Us","Color":"Blue"},{"ID":"20","Name":"Mallory Johnson","Email":"malloryjohnson429@gmail.com","Organization":"Alpha Chi Omega","Delegate":"YES","Amount":"85","Tshirt":"XL","SignedIn":"0","Year":"0","TimesAttended":"1","DateSignedIn":"0000-00-00","Team":"Alpha Chi Omega","Color":"Pink"},{"ID":"21","Name":"Sydney Edmundson","Email":"sme0014@auburn.edu","Organization":"Auburn University Marching Band","Delegate":"NO","Amount":"75","Tshirt":"M","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-08","Team":"Auburn University Marching Band","Color":"Blue"},{"ID":"22","Name":"Hannah Taylor","Email":"hnt0007@auburn.edu","Organization":"CHA CHA CHAARG","Delegate":"YES","Amount":"325","Tshirt":"S","SignedIn":"1","Year":"0","TimesAttended":"1","DateSignedIn":"2018-02-08","Team":"CHA CHA CHAARG","Color":"Purple"},{"ID":"23","Name":"Elisabeth Rusinek","Email":"eir0002@auburn.edu","Organization":"Tri Sigma","Delegate":"YES","Amount":"299","Tshirt":"M","SignedIn":"1","Year":"0","TimesAttended":"1","DateSignedIn":"2018-02-08","Team":"Tri Sigma","Color":"Purple"},{"ID":"24","Name":"Caroline Harrison","Email":"cgh0025@auburn.edu","Organization":"KKG is FTK","Delegate":"NO","Amount":"15","Tshirt":"XL","SignedIn":"0","Year":"0","TimesAttended":"1","DateSignedIn":"0000-00-00","Team":"KKG is FTK","Color":"Purple"},{"ID":"25","Name":"Shelby Meyer","Email":"slm0067@auburn.edu","Organization":"Tri Sigma","Delegate":"NO","Amount":"62","Tshirt":"M","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Tri Sigma","Color":"Purple"},{"ID":"26","Name":"Brenna Middleton","Email":"bhm0012@auburn.edu","Organization":"Pi Beta Phi","Delegate":"NO","Amount":"0","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Pi Beta Phi","Color":"Orange"},{"ID":"27","Name":"Savannah Snyder","Email":"savannahsnyder99@yahoo.com","Organization":"Auburn University Marching Band","Delegate":"NO","Amount":"100","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-10","Team":"Auburn University Marching Band","Color":"Blue"},{"ID":"28","Name":"Samantha Perkinson","Email":"smp0051@auburn.edu","Organization":"Pi Beta Phi","Delegate":"NO","Amount":"0","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-08","Team":"Pi Beta Phi","Color":"Orange"},{"ID":"29","Name":"Madeline Northrop","Email":"msn0004@auburn.edu","Organization":"Lost in the SOS","Delegate":"YES","Amount":"50","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"2","DateSignedIn":"0000-00-00","Team":"Lost in the SOS","Color":"Orange"},{"ID":"30","Name":"Meghan Taylor","Email":"met0052@auburn.edu","Organization":"OOZMA KAPPA","Delegate":"NO","Amount":"0","Tshirt":"XL","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"OOZMA KAPPA","Color":"Green"},{"ID":"31","Name":"Ben Myrick","Email":"benfb34@gmail.com","Organization":"Alpha Gamma Rho","Delegate":"YES","Amount":"1","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"0","DateSignedIn":"0000-00-00","Team":"Alpha Gamma Rho","Color":"Purple"},{"ID":"32","Name":"Team Captain","Email":"idk0013@whatever.com","Organization":"Phi Kappa Tau FTK","Delegate":"YES","Amount":"0","Tshirt":"L","SignedIn":"0","Year":"0","TimesAttended":"2","DateSignedIn":"0000-00-00","Team":"Phi Kappa Tau FTK","Color":"Yellow"},{"ID":"33","Name":"PIper Flood","Email":"pcf0006@auburn.edu","Organization":"Sigma Phi Lambda","Delegate":"YES","Amount":"25","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-08","Team":"Sigma Phi Lambda","Color":"Purple"},{"ID":"34","Name":"Savannah Goble","Email":"goblesavannah@gmail.com","Organization":"Alpha Sigma Phi","Delegate":"YES","Amount":"0","Tshirt":"XL","SignedIn":"1","Year":"0","TimesAttended":"4","DateSignedIn":"2018-02-08","Team":"Alpha Sigma Phi","Color":"Yellow"},{"ID":"35","Name":"Kayla Smith","Email":"kms0115@auburn.edu","Organization":"Tri Sigma","Delegate":"NO","Amount":"0","Tshirt":"XL","SignedIn":"0","Year":"0","TimesAttended":"0","DateSignedIn":"0000-00-00","Team":"Tri Sigma","Color":"Purple"},{"ID":"36","Name":"Danielle Bolton","Email":"tdb0028@auburn.edu","Organization":"Alpha Xi Delta","Delegate":"YES","Amount":"62","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"2","DateSignedIn":"2018-02-08","Team":"Alpha Xi Delta","Color":"Green"},{"ID":"37","Name":"Emily Churchman","Email":"emc0047@auburn.edu","Organization":"CSO is FTK","Delegate":"YES","Amount":"25","Tshirt":"L","SignedIn":"1","Year":"0","TimesAttended":"1","DateSignedIn":"2018-02-08","Team":"CSO is FTK","Color":"Yellow"},{"ID":"38","Name":"Shenandoah Terry","Email":"srt0027@tigermail.auburn.edu","Organization":"Tri Sigma","Delegate":"NO","Amount":"100","Tshirt":"M","SignedIn":"1","Year":"0","TimesAttended":"0","DateSignedIn":"2018-02-09","Team":"Tri Sigma","Color":"Purple"},{"ID":"39","Name":"Eliza Jane Sessions","Email":"elizajanesessions@gmail.com","Organization":"Pi Beta Phi","Delegate":"NO","Amount":"387","Tshirt":"M","SignedIn":"1","Year":"0","TimesAttended":"2","DateSignedIn":"2018-02-08","Team":"Pi Beta Phi","Color":"Orange"}];
                this.setState({nameList: data});
            })
     }
     onPicked = (user) => {
         console.log(user);
     }
  render() {
    return (
      <article className="content">
        <h1> Welcome to AUDM! </h1>
        <p>We're excited to have you here! Let's get you signed in and ready for the <strong>best DM day of the year</strong>.</p>
        <div>Hi, my name is 
            <TextField 
                hintText="Slim Shady"
                onChange={(event, value) => this.setState({name: value})}
                value = {this.state.name}
            />
        </div>

        {this.state.name.length >= 3 ? 
            <NameList 
                name={this.state.name}
                source={this.state.nameList}
                onPicked={(user) => this.onPicked(user)}
            /> 
            : 
            ""}
        
      </article>
    );
  }
}

export default Home;
